{# templates/reservation/_form.html.twig #}

{{ form_start(form, {
    'attr': {
        'class': 'reservation-form ajax-form',
        'data-reservation-target': 'form'
    },
    'action': path('create_reservation')
}) }}

    <div class="form-group">
        {{ form_label(form.dateReservation, 'Date de réservation', {
            'label_attr': {'class': 'font-weight-bold'}
        }) }}
        {{ form_widget(form.dateReservation, {
            'attr': {
                'class': 'form-control',
                'data-reservation-target': 'dateInput'
            }
        }) }}
        <small class="form-text text-muted">Sélectionnez la date souhaitée</small>
        {{ form_errors(form.dateReservation) }}
    </div>

    <div class="form-group">
        {{ form_label(form.utilisateur, 'Utilisateur', {
            'label_attr': {'class': 'font-weight-bold'}
        }) }}
        {{ form_widget(form.utilisateur, {
            'attr': {
                'class': 'form-control',
                'data-reservation-target': 'userInput'
            }
        }) }}
        {{ form_errors(form.utilisateur) }}
    </div>

    <div class="form-group">
        {{ form_label(form.creneau, 'Créneau horaire', {
            'label_attr': {'class': 'font-weight-bold'}
        }) }}
        {{ form_widget(form.creneau, {
            'attr': {
                'class': 'form-control',
                'data-reservation-target': 'slotInput'
            }
        }) }}
        <small class="form-text text-muted">Disponibilités mises à jour en temps réel</small>
        {{ form_errors(form.creneau) }}
    </div>

    <div class="form-footer d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-calendar-check mr-2"></i> Réserver
        </button>
        
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
            <i class="fas fa-times mr-2"></i> Annuler
        </button>
    </div>

{{ form_end(form) }}

<script>
// Script pour la validation en temps réel
document.addEventListener('DOMContentLoaded', function() {
    const dateInput = document.querySelector('[data-reservation-target="dateInput"]');
    const slotInput = document.querySelector('[data-reservation-target="slotInput"]');
    
    if (dateInput && slotInput) {
        dateInput.addEventListener('change', function() {
            // Ici vous pourriez ajouter du code pour filtrer les créneaux
            // en fonction de la date sélectionnée
            console.log('Date changée:', this.value);
        });
    }
});
</script>